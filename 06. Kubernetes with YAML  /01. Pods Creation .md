# 🎯 **Kubernetes Pods with YAML**

---

### 🧩 **Title**

**Kubernetes Pods with YAML**

### 📝 **Description**

**Learn to write and test Kubernetes Pods with YAML**

---

## 🚀 **Step-01: Kubernetes YAML Top level Objects**

### 🗂️ **Objective**

Discuss about the k8s YAML top level objects

---

### 📄 **File:** `kube-base-definition.yml`

```yaml
apiVersion:
kind:
metadata:
  
spec:
```

---

### 📚 **Kubernetes Reference Links**

| 🔗 Reference Type             | 📘 Description                                  |
| ----------------------------- | ----------------------------------------------- |
| **Kubernetes Reference**      | General Kubernetes API documentation            |
| **Kubernetes API Reference**  | Details about available API groups and versions |
| **Pod API Objects Reference** | Specifications for defining and managing Pods   |

---

### ⚙️ **YAML Structure Overview**

| 🏷️ Section  | 🧠 Meaning                                            |
| ------------ | ----------------------------------------------------- |
| `apiVersion` | Defines the Kubernetes API version to use             |
| `kind`       | Specifies the resource type (e.g., Pod, Service)      |
| `metadata`   | Provides resource identification (name, labels, etc.) |
| `spec`       | Defines desired state and configuration               |

---

## 🚀 **Step-02: Create Simple Pod Definition using YAML**

### 🗂️ **Objective**

We are going to create a very basic pod definition

---

### 📄 **File:** `01-pod-definition.yml`

```yaml
apiVersion: v1 # String
kind: Pod  # String
metadata: # Dictionary
  name: myapp-pod
  labels: # Dictionary 
    app: myapp         
spec:
  containers: # List
    - name: myapp
      image: stacksimplify/kubenginx:1.0.0
      ports:
        - containerPort: 80
```

---

### ⚙️ **Commands to Create Pod**

```bash
# Change Directory
cd kube-manifests

# Create Pod
kubectl create -f 01-pod-definition.yml
# [or]
kubectl apply -f 01-pod-definition.yml

# List Pods
kubectl get pods
```

---

### 📊 **Pod Components Summary**

| 🔧 Component   | 💬 Description                                      |
| -------------- | --------------------------------------------------- |
| **apiVersion** | Version of Kubernetes API (`v1`)                    |
| **kind**       | Type of resource (`Pod`)                            |
| **metadata**   | Includes `name` and `labels`                        |
| **spec**       | Container configuration details                     |
| **containers** | List of container(s) within the Pod                 |
| **image**      | Docker image used (`stacksimplify/kubenginx:1.0.0`) |
| **ports**      | Exposed container port (`80`)                       |

---

### 💡 **Expected Output**

```bash
NAME          READY   STATUS    RESTARTS   AGE
myapp-pod     1/1     Running   0          20s
```

---

## 🌐 **Step-03: Create a LoadBalancer Service**

### 🗂️ **Objective**

Expose the Pod externally using a LoadBalancer service.

---

### 📄 **File:** `02-pod-LoadBalancer-service.yml`

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-pod-loadbalancer-service  # Name of the Service
spec:
  type: LoadBalancer
  selector:
  # Loadbalance traffic across Pods matching this label selector
    app: myapp
  # Accept traffic sent to port 80    
  ports: 
    - name: http
      port: 80    # Service Port
      targetPort: 80 # Container Port
```

---

### ⚙️ **Commands to Create LoadBalancer Service**

```bash
# Create Service
kubectl apply -f 02-pod-LoadBalancer-service.yml

# List Service
kubectl get svc

# Access Application
http://<Load-Balancer-Service-IP>
curl http://<Load-Balancer-Service-IP>
```

---

### 🌍 **Service Overview Table**

| ⚙️ Field             | 📖 Description                              |
| -------------------- | ------------------------------------------- |
| **type**             | `LoadBalancer` — exposes service externally |
| **selector**         | Matches Pods with label `app: myapp`        |
| **ports.port**       | Service Port (`80`)                         |
| **ports.targetPort** | Container Port (`80`)                       |
| **metadata.name**    | Name of the Service                         |

---

### 🌈 **Visual Overview: Service + Pod Connection**

```text
     +---------------------------+
     |  LoadBalancer Service 🌐  |
     |  Port: 80                 |
     +-------------+-------------+
                   |
                   v
          +-------------------+
          |   Pod: myapp-pod  |
          |   Container: myapp|
          |   Port: 80        |
          +-------------------+
```

---

## 🧹 **Step-04: Clean-Up Kubernetes Pod and Service**

### ⚙️ **Commands**

```bash
# Change Directory
cd kube-manifests

# Delete Pod
kubectl delete -f 01-pod-definition.yml

# Delete Service
kubectl delete -f 02-pod-LoadBalancer-service.yml
```

---

### ✅ **Clean-up Verification**

| 🔍 Resource  | 🧾 Command         | 🧹 Expected Result           |
| ------------ | ------------------ | ---------------------------- |
| **Pods**     | `kubectl get pods` | No pods listed               |
| **Services** | `kubectl get svc`  | LoadBalancer service deleted |

---

## 📚 **API Object References**

| 🔗 Reference                 | 🧭 Purpose                                          |
| ---------------------------- | --------------------------------------------------- |
| **Kubernetes API Spec**      | Full schema for Kubernetes objects                  |
| **Pod Spec**                 | Configuration guide for Pods                        |
| **Service Spec**             | Details for defining Kubernetes Services            |
| **Kubernetes API Reference** | Complete API documentation for Kubernetes resources |

---

### 🎓 **Summary Diagram: Complete Workflow**

```text
[01-pod-definition.yml] --> Creates --> Pod (myapp-pod)
                                   |
                                   v
[02-pod-LoadBalancer-service.yml] --> Exposes --> Service (myapp-pod-loadbalancer-service)
                                   |
                                   v
                             External Access 🌐
```

---

### 🏁 **End of SOP**

✅ You have successfully:

* Created a Kubernetes Pod 🧩
* Exposed it using a LoadBalancer Service 🌐
* Verified and cleaned up resources 🧹

---
