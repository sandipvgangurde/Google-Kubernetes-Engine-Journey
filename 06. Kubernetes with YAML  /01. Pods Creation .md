# ğŸ¯ **Kubernetes Pods with YAML**

---

### ğŸ§© **Title**

**Kubernetes Pods with YAML**

### ğŸ“ **Description**

**Learn to write and test Kubernetes Pods with YAML**

---

## ğŸš€ **Step-01: Kubernetes YAML Top level Objects**

### ğŸ—‚ï¸ **Objective**

Discuss about the k8s YAML top level objects

---

### ğŸ“„ **File:** `kube-base-definition.yml`

```yaml
apiVersion:
kind:
metadata:
  
spec:
```

---

### ğŸ“š **Kubernetes Reference Links**

| ğŸ”— Reference Type             | ğŸ“˜ Description                                  |
| ----------------------------- | ----------------------------------------------- |
| **Kubernetes Reference**      | General Kubernetes API documentation            |
| **Kubernetes API Reference**  | Details about available API groups and versions |
| **Pod API Objects Reference** | Specifications for defining and managing Pods   |

---

### âš™ï¸ **YAML Structure Overview**

| ğŸ·ï¸ Section  | ğŸ§  Meaning                                            |
| ------------ | ----------------------------------------------------- |
| `apiVersion` | Defines the Kubernetes API version to use             |
| `kind`       | Specifies the resource type (e.g., Pod, Service)      |
| `metadata`   | Provides resource identification (name, labels, etc.) |
| `spec`       | Defines desired state and configuration               |

---

## ğŸš€ **Step-02: Create Simple Pod Definition using YAML**

### ğŸ—‚ï¸ **Objective**

We are going to create a very basic pod definition

---

### ğŸ“„ **File:** `01-pod-definition.yml`

```yaml
apiVersion: v1 # String
kind: Pod  # String
metadata: # Dictionary
  name: myapp-pod
  labels: # Dictionary 
    app: myapp         
spec:
  containers: # List
    - name: myapp
      image: stacksimplify/kubenginx:1.0.0
      ports:
        - containerPort: 80
```

---

### âš™ï¸ **Commands to Create Pod**

```bash
# Change Directory
cd kube-manifests

# Create Pod
kubectl create -f 01-pod-definition.yml
# [or]
kubectl apply -f 01-pod-definition.yml

# List Pods
kubectl get pods
```

---

### ğŸ“Š **Pod Components Summary**

| ğŸ”§ Component   | ğŸ’¬ Description                                      |
| -------------- | --------------------------------------------------- |
| **apiVersion** | Version of Kubernetes API (`v1`)                    |
| **kind**       | Type of resource (`Pod`)                            |
| **metadata**   | Includes `name` and `labels`                        |
| **spec**       | Container configuration details                     |
| **containers** | List of container(s) within the Pod                 |
| **image**      | Docker image used (`stacksimplify/kubenginx:1.0.0`) |
| **ports**      | Exposed container port (`80`)                       |

---

### ğŸ’¡ **Expected Output**

```bash
NAME          READY   STATUS    RESTARTS   AGE
myapp-pod     1/1     Running   0          20s
```

---

## ğŸŒ **Step-03: Create a LoadBalancer Service**

### ğŸ—‚ï¸ **Objective**

Expose the Pod externally using a LoadBalancer service.

---

### ğŸ“„ **File:** `02-pod-LoadBalancer-service.yml`

```yaml
apiVersion: v1
kind: Service
metadata:
  name: myapp-pod-loadbalancer-service  # Name of the Service
spec:
  type: LoadBalancer
  selector:
  # Loadbalance traffic across Pods matching this label selector
    app: myapp
  # Accept traffic sent to port 80    
  ports: 
    - name: http
      port: 80    # Service Port
      targetPort: 80 # Container Port
```

---

### âš™ï¸ **Commands to Create LoadBalancer Service**

```bash
# Create Service
kubectl apply -f 02-pod-LoadBalancer-service.yml

# List Service
kubectl get svc

# Access Application
http://<Load-Balancer-Service-IP>
curl http://<Load-Balancer-Service-IP>
```

---

### ğŸŒ **Service Overview Table**

| âš™ï¸ Field             | ğŸ“– Description                              |
| -------------------- | ------------------------------------------- |
| **type**             | `LoadBalancer` â€” exposes service externally |
| **selector**         | Matches Pods with label `app: myapp`        |
| **ports.port**       | Service Port (`80`)                         |
| **ports.targetPort** | Container Port (`80`)                       |
| **metadata.name**    | Name of the Service                         |

---

### ğŸŒˆ **Visual Overview: Service + Pod Connection**

```text
     +---------------------------+
     |  LoadBalancer Service ğŸŒ  |
     |  Port: 80                 |
     +-------------+-------------+
                   |
                   v
          +-------------------+
          |   Pod: myapp-pod  |
          |   Container: myapp|
          |   Port: 80        |
          +-------------------+
```

---

## ğŸ§¹ **Step-04: Clean-Up Kubernetes Pod and Service**

### âš™ï¸ **Commands**

```bash
# Change Directory
cd kube-manifests

# Delete Pod
kubectl delete -f 01-pod-definition.yml

# Delete Service
kubectl delete -f 02-pod-LoadBalancer-service.yml
```

---

### âœ… **Clean-up Verification**

| ğŸ” Resource  | ğŸ§¾ Command         | ğŸ§¹ Expected Result           |
| ------------ | ------------------ | ---------------------------- |
| **Pods**     | `kubectl get pods` | No pods listed               |
| **Services** | `kubectl get svc`  | LoadBalancer service deleted |

---

## ğŸ“š **API Object References**

| ğŸ”— Reference                 | ğŸ§­ Purpose                                          |
| ---------------------------- | --------------------------------------------------- |
| **Kubernetes API Spec**      | Full schema for Kubernetes objects                  |
| **Pod Spec**                 | Configuration guide for Pods                        |
| **Service Spec**             | Details for defining Kubernetes Services            |
| **Kubernetes API Reference** | Complete API documentation for Kubernetes resources |

---

### ğŸ“ **Summary Diagram: Complete Workflow**

```text
[01-pod-definition.yml] --> Creates --> Pod (myapp-pod)
                                   |
                                   v
[02-pod-LoadBalancer-service.yml] --> Exposes --> Service (myapp-pod-loadbalancer-service)
                                   |
                                   v
                             External Access ğŸŒ
```

---

### ğŸ **End of SOP**

âœ… You have successfully:

* Created a Kubernetes Pod ğŸ§©
* Exposed it using a LoadBalancer Service ğŸŒ
* Verified and cleaned up resources ğŸ§¹

---
